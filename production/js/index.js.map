{"version":3,"sources":["node_modules/browser-pack/_prelude.js","development/js/index.js","development/js/modules/chatting.js","development/js/modules/commands.js","development/js/modules/emotes.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as message from './modules/chatting'\n\nconst socket = io()\n\nconst\n    chatForm = document.querySelector('[send-message]'),\n    chatName = chatForm.querySelector('input[type=\"text\"]:first-of-type'),\n    chatString = chatForm.querySelector('div input[type=\"text\"]'),\n    chatSubmit = chatForm.querySelector('div input[type=\"submit\"]')\n\n// Chatting\nchatSubmit.addEventListener('click', (event) => {\n    event.preventDefault()\n\n    socket.emit('chat', {\n        name: chatName.value,\n        message: chatString.value\n    })\n\n    socket.emit('command', {\n        name: chatName.value,\n        message: chatString.value\n    })\n\n    socket.emit('emote', {\n        name: chatName.value,\n        message: chatString.value\n    })\n\n    chatString.value = ''\n})\n\nsocket.on('chat', (user) => {\n    message.chat(user)\n})\n\nsocket.on('command', (command) => {\n    message.command(command)\n})\n\nsocket.on('emote', (emote) => {\n    message.emote(emote)\n})\n\n// Joining the chat\nsocket.on('join', (data) => {\n    message.server(data)\n})\n\n// Leaving the chat\nsocket.on('leave', (data) => {\n    message.server(data)\n})","import * as commands from './commands'\nimport * as emotes from './emotes'\n\nconst\n    chatContainer = document.querySelector('[chat]'),\n    chatForm = document.querySelector('[send-message]'),\n    chatName = chatForm.querySelector('input[type=\"text\"]:first-of-type')\n\nexport function chat(user) {\n    const messageElement = document.createElement('div')\n    messageElement.textContent = `${user.name}: ${user.message}`\n    messageElement.className = 'user'\n\n    if (user.name == `${chatName.value} ${user.name.split(' ')[1]}`) {\n        messageElement.className = messageElement.className + ' you'\n    }\n\n    addMessage(messageElement)\n}\n\nexport function server(data) {\n    const messageElement = document.createElement('div')\n    messageElement.textContent = data.message\n    messageElement.className = 'server'\n    addMessage(messageElement)\n}\n\nexport function command(command) {\n    if (commands.check(command.message)) {\n        addMessage(commands.run(command.message))\n    } else {\n        fallbackInput('command')\n    }\n}\n\nexport function emote(emote) {\n    if (emotes.check(emote.message)) {\n        addMessage(emotes.run(emote))\n    } else {\n        fallbackInput('emote')\n    }\n}\n\n// Functions I re-use\nfunction fallbackInput(input) {\n    const messageElement = document.createElement('div')\n    messageElement.textContent = `This ${input} is not available!`\n    messageElement.className = input\n    addMessage(messageElement)\n}\n\nfunction addMessage(messageElement) {\n    if (messageElement.length === undefined) {\n        chatContainer.append(messageElement)\n    } else {\n        messageElement.forEach(element => chatContainer.append(element))\n    }\n    scrollToBottom()\n}\n\nfunction scrollToBottom() {\n    chatContainer.scrollTop = chatContainer.scrollHeight - chatContainer.clientHeight;\n}","const commands = ['/commands', '/red', '/yellow', '/green', '/blue']\n\nexport function check(command) {\n    return commands.find(message => message === command)\n}\n\nexport function run(command) {\n    if (command === '/commands') {\n        return allCommands()\n    }\n\n    if (command === '/red') {\n        return color('#E01E5A', 'Red')\n    }\n\n    if (command === '/yellow') {\n        return color('#EBB22E', 'Yellow')\n    }\n\n    if (command === '/green') {\n        return color('#2FB67D', 'Green')\n    }\n\n    if (command === '/blue') {\n        return color('#37C5F0', 'Blue')\n    }\n}\n\nfunction allCommands() {\n    return commands.map(command => {\n        return createMessage(command)\n    })\n}\n\nfunction color(color, name) {\n    document.querySelector('[chatpage]').setAttribute('style', `background-color: ${color}`)\n    return createMessage(`Changed color to: ${name}`)\n}\n\nfunction createMessage(message) {\n    const messageElement = document.createElement('div')\n    messageElement.textContent = message\n    messageElement.className = 'command'\n\n    return messageElement\n}","const emotes = [':emotes', ':happy', ':angry', ':sad', ':cry', ':laugh', ':kiss']\n\nconst\n    chatForm = document.querySelector('[send-message]'),\n    chatName = chatForm.querySelector('input[type=\"text\"]:first-of-type')\n\nexport function check(emote) {\n    return emotes.some(string => emote.includes(string))\n}\n\nexport function run(emote) {\n    if (emote.message === ':emotes') {\n        return allEmotes()\n    }\n\n    let string\n    emotes.forEach(emoticon => {\n        if (emote.message.includes(emoticon)) {\n            const name = emoticon.substring(1)\n            const regex = new RegExp(emoticon, 'g')\n\n            string = emote.message.replace(regex, createImg(`/images/${name}`))\n        }\n    })\n\n    const message = `${emote.name}: ${string}`\n    return createMessage(emote, message, 'user')\n}\n\nfunction allEmotes() {\n    return emotes.map(emote => {\n        return createMessage(emote, 'command')\n    })\n}\n\n// Helper functions\nfunction createImg(emote) {\n    return `<img src=\"${emote}.png\">`\n}\n\nfunction createMessage(user, message, actor) {\n    const messageElement = document.createElement('div')\n    messageElement.innerHTML = message\n    messageElement.className = actor\n\n    if (user.name == `${chatName.value} ${user.name.split(' ')[1]}`) {\n        messageElement.className = messageElement.className + ' you'\n    }\n\n    return messageElement\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXZlbG9wbWVudC9qcy9pbmRleC5qcyIsImRldmVsb3BtZW50L2pzL21vZHVsZXMvY2hhdHRpbmcuanMiLCJkZXZlbG9wbWVudC9qcy9tb2R1bGVzL2NvbW1hbmRzLmpzIiwiZGV2ZWxvcG1lbnQvanMvbW9kdWxlcy9lbW90ZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUE7Ozs7OztBQUVBLElBQU0sTUFBTSxHQUFHLEVBQUUsRUFBakI7QUFFQSxJQUNJLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixnQkFBdkIsQ0FEZjtBQUFBLElBRUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGtDQUF2QixDQUZmO0FBQUEsSUFHSSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsd0JBQXZCLENBSGpCO0FBQUEsSUFJSSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsMEJBQXZCLENBSmpCLEMsQ0FNQTs7QUFDQSxVQUFVLENBQUMsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsVUFBQyxLQUFELEVBQVc7QUFDNUMsRUFBQSxLQUFLLENBQUMsY0FBTjtBQUVBLEVBQUEsTUFBTSxDQUFDLElBQVAsQ0FBWSxNQUFaLEVBQW9CO0FBQ2hCLElBQUEsSUFBSSxFQUFFLFFBQVEsQ0FBQyxLQURDO0FBRWhCLElBQUEsT0FBTyxFQUFFLFVBQVUsQ0FBQztBQUZKLEdBQXBCO0FBS0EsRUFBQSxNQUFNLENBQUMsSUFBUCxDQUFZLFNBQVosRUFBdUI7QUFDbkIsSUFBQSxJQUFJLEVBQUUsUUFBUSxDQUFDLEtBREk7QUFFbkIsSUFBQSxPQUFPLEVBQUUsVUFBVSxDQUFDO0FBRkQsR0FBdkI7QUFLQSxFQUFBLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixFQUFxQjtBQUNqQixJQUFBLElBQUksRUFBRSxRQUFRLENBQUMsS0FERTtBQUVqQixJQUFBLE9BQU8sRUFBRSxVQUFVLENBQUM7QUFGSCxHQUFyQjtBQUtBLEVBQUEsVUFBVSxDQUFDLEtBQVgsR0FBbUIsRUFBbkI7QUFDSCxDQW5CRDtBQXFCQSxNQUFNLENBQUMsRUFBUCxDQUFVLE1BQVYsRUFBa0IsVUFBQyxJQUFELEVBQVU7QUFDeEIsRUFBQSxPQUFPLENBQUMsSUFBUixDQUFhLElBQWI7QUFDSCxDQUZEO0FBSUEsTUFBTSxDQUFDLEVBQVAsQ0FBVSxTQUFWLEVBQXFCLFVBQUMsT0FBRCxFQUFhO0FBQzlCLEVBQUEsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEI7QUFDSCxDQUZEO0FBSUEsTUFBTSxDQUFDLEVBQVAsQ0FBVSxPQUFWLEVBQW1CLFVBQUMsS0FBRCxFQUFXO0FBQzFCLEVBQUEsT0FBTyxDQUFDLEtBQVIsQ0FBYyxLQUFkO0FBQ0gsQ0FGRCxFLENBSUE7O0FBQ0EsTUFBTSxDQUFDLEVBQVAsQ0FBVSxNQUFWLEVBQWtCLFVBQUMsSUFBRCxFQUFVO0FBQ3hCLEVBQUEsT0FBTyxDQUFDLE1BQVIsQ0FBZSxJQUFmO0FBQ0gsQ0FGRCxFLENBSUE7O0FBQ0EsTUFBTSxDQUFDLEVBQVAsQ0FBVSxPQUFWLEVBQW1CLFVBQUMsSUFBRCxFQUFVO0FBQ3pCLEVBQUEsT0FBTyxDQUFDLE1BQVIsQ0FBZSxJQUFmO0FBQ0gsQ0FGRDs7Ozs7Ozs7Ozs7Ozs7O0FDbERBOztBQUNBOzs7Ozs7QUFFQSxJQUNJLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQURwQjtBQUFBLElBRUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGdCQUF2QixDQUZmO0FBQUEsSUFHSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsa0NBQXZCLENBSGY7O0FBS08sU0FBUyxJQUFULENBQWMsSUFBZCxFQUFvQjtBQUN2QixNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLEVBQUEsY0FBYyxDQUFDLFdBQWYsYUFBZ0MsSUFBSSxDQUFDLElBQXJDLGVBQThDLElBQUksQ0FBQyxPQUFuRDtBQUNBLEVBQUEsY0FBYyxDQUFDLFNBQWYsR0FBMkIsTUFBM0I7O0FBRUEsTUFBSSxJQUFJLENBQUMsSUFBTCxjQUFnQixRQUFRLENBQUMsS0FBekIsY0FBa0MsSUFBSSxDQUFDLElBQUwsQ0FBVSxLQUFWLENBQWdCLEdBQWhCLEVBQXFCLENBQXJCLENBQWxDLENBQUosRUFBaUU7QUFDN0QsSUFBQSxjQUFjLENBQUMsU0FBZixHQUEyQixjQUFjLENBQUMsU0FBZixHQUEyQixNQUF0RDtBQUNIOztBQUVELEVBQUEsVUFBVSxDQUFDLGNBQUQsQ0FBVjtBQUNIOztBQUVNLFNBQVMsTUFBVCxDQUFnQixJQUFoQixFQUFzQjtBQUN6QixNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLEVBQUEsY0FBYyxDQUFDLFdBQWYsR0FBNkIsSUFBSSxDQUFDLE9BQWxDO0FBQ0EsRUFBQSxjQUFjLENBQUMsU0FBZixHQUEyQixRQUEzQjtBQUNBLEVBQUEsVUFBVSxDQUFDLGNBQUQsQ0FBVjtBQUNIOztBQUVNLFNBQVMsT0FBVCxDQUFpQixPQUFqQixFQUEwQjtBQUM3QixNQUFJLFFBQVEsQ0FBQyxLQUFULENBQWUsT0FBTyxDQUFDLE9BQXZCLENBQUosRUFBcUM7QUFDakMsSUFBQSxVQUFVLENBQUMsUUFBUSxDQUFDLEdBQVQsQ0FBYSxPQUFPLENBQUMsT0FBckIsQ0FBRCxDQUFWO0FBQ0gsR0FGRCxNQUVPO0FBQ0gsSUFBQSxhQUFhLENBQUMsU0FBRCxDQUFiO0FBQ0g7QUFDSjs7QUFFTSxTQUFTLEtBQVQsQ0FBZSxLQUFmLEVBQXNCO0FBQ3pCLE1BQUksTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFLLENBQUMsT0FBbkIsQ0FBSixFQUFpQztBQUM3QixJQUFBLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBUCxDQUFXLEtBQVgsQ0FBRCxDQUFWO0FBQ0gsR0FGRCxNQUVPO0FBQ0gsSUFBQSxhQUFhLENBQUMsT0FBRCxDQUFiO0FBQ0g7QUFDSixDLENBRUQ7OztBQUNBLFNBQVMsYUFBVCxDQUF1QixLQUF2QixFQUE4QjtBQUMxQixNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLEVBQUEsY0FBYyxDQUFDLFdBQWYsa0JBQXFDLEtBQXJDO0FBQ0EsRUFBQSxjQUFjLENBQUMsU0FBZixHQUEyQixLQUEzQjtBQUNBLEVBQUEsVUFBVSxDQUFDLGNBQUQsQ0FBVjtBQUNIOztBQUVELFNBQVMsVUFBVCxDQUFvQixjQUFwQixFQUFvQztBQUNoQyxNQUFJLGNBQWMsQ0FBQyxNQUFmLEtBQTBCLFNBQTlCLEVBQXlDO0FBQ3JDLElBQUEsYUFBYSxDQUFDLE1BQWQsQ0FBcUIsY0FBckI7QUFDSCxHQUZELE1BRU87QUFDSCxJQUFBLGNBQWMsQ0FBQyxPQUFmLENBQXVCLFVBQUEsT0FBTztBQUFBLGFBQUksYUFBYSxDQUFDLE1BQWQsQ0FBcUIsT0FBckIsQ0FBSjtBQUFBLEtBQTlCO0FBQ0g7O0FBQ0QsRUFBQSxjQUFjO0FBQ2pCOztBQUVELFNBQVMsY0FBVCxHQUEwQjtBQUN0QixFQUFBLGFBQWEsQ0FBQyxTQUFkLEdBQTBCLGFBQWEsQ0FBQyxZQUFkLEdBQTZCLGFBQWEsQ0FBQyxZQUFyRTtBQUNIOzs7Ozs7Ozs7O0FDOURELElBQU0sUUFBUSxHQUFHLENBQUMsV0FBRCxFQUFjLE1BQWQsRUFBc0IsU0FBdEIsRUFBaUMsUUFBakMsRUFBMkMsT0FBM0MsQ0FBakI7O0FBRU8sU0FBUyxLQUFULENBQWUsT0FBZixFQUF3QjtBQUMzQixTQUFPLFFBQVEsQ0FBQyxJQUFULENBQWMsVUFBQSxPQUFPO0FBQUEsV0FBSSxPQUFPLEtBQUssT0FBaEI7QUFBQSxHQUFyQixDQUFQO0FBQ0g7O0FBRU0sU0FBUyxHQUFULENBQWEsT0FBYixFQUFzQjtBQUN6QixNQUFJLE9BQU8sS0FBSyxXQUFoQixFQUE2QjtBQUN6QixXQUFPLFdBQVcsRUFBbEI7QUFDSDs7QUFFRCxNQUFJLE9BQU8sS0FBSyxNQUFoQixFQUF3QjtBQUNwQixXQUFPLEtBQUssQ0FBQyxTQUFELEVBQVksS0FBWixDQUFaO0FBQ0g7O0FBRUQsTUFBSSxPQUFPLEtBQUssU0FBaEIsRUFBMkI7QUFDdkIsV0FBTyxLQUFLLENBQUMsU0FBRCxFQUFZLFFBQVosQ0FBWjtBQUNIOztBQUVELE1BQUksT0FBTyxLQUFLLFFBQWhCLEVBQTBCO0FBQ3RCLFdBQU8sS0FBSyxDQUFDLFNBQUQsRUFBWSxPQUFaLENBQVo7QUFDSDs7QUFFRCxNQUFJLE9BQU8sS0FBSyxPQUFoQixFQUF5QjtBQUNyQixXQUFPLEtBQUssQ0FBQyxTQUFELEVBQVksTUFBWixDQUFaO0FBQ0g7QUFDSjs7QUFFRCxTQUFTLFdBQVQsR0FBdUI7QUFDbkIsU0FBTyxRQUFRLENBQUMsR0FBVCxDQUFhLFVBQUEsT0FBTyxFQUFJO0FBQzNCLFdBQU8sYUFBYSxDQUFDLE9BQUQsQ0FBcEI7QUFDSCxHQUZNLENBQVA7QUFHSDs7QUFFRCxTQUFTLEtBQVQsQ0FBZSxLQUFmLEVBQXNCLElBQXRCLEVBQTRCO0FBQ3hCLEVBQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsWUFBdkIsRUFBcUMsWUFBckMsQ0FBa0QsT0FBbEQsOEJBQWdGLEtBQWhGO0FBQ0EsU0FBTyxhQUFhLDZCQUFzQixJQUF0QixFQUFwQjtBQUNIOztBQUVELFNBQVMsYUFBVCxDQUF1QixPQUF2QixFQUFnQztBQUM1QixNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLEVBQUEsY0FBYyxDQUFDLFdBQWYsR0FBNkIsT0FBN0I7QUFDQSxFQUFBLGNBQWMsQ0FBQyxTQUFmLEdBQTJCLFNBQTNCO0FBRUEsU0FBTyxjQUFQO0FBQ0g7Ozs7Ozs7Ozs7QUM3Q0QsSUFBTSxNQUFNLEdBQUcsQ0FBQyxTQUFELEVBQVksUUFBWixFQUFzQixRQUF0QixFQUFnQyxNQUFoQyxFQUF3QyxNQUF4QyxFQUFnRCxRQUFoRCxFQUEwRCxPQUExRCxDQUFmO0FBRUEsSUFDSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsZ0JBQXZCLENBRGY7QUFBQSxJQUVJLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixrQ0FBdkIsQ0FGZjs7QUFJTyxTQUFTLEtBQVQsQ0FBZSxLQUFmLEVBQXNCO0FBQ3pCLFNBQU8sTUFBTSxDQUFDLElBQVAsQ0FBWSxVQUFBLE1BQU07QUFBQSxXQUFJLEtBQUssQ0FBQyxRQUFOLENBQWUsTUFBZixDQUFKO0FBQUEsR0FBbEIsQ0FBUDtBQUNIOztBQUVNLFNBQVMsR0FBVCxDQUFhLEtBQWIsRUFBb0I7QUFDdkIsTUFBSSxLQUFLLENBQUMsT0FBTixLQUFrQixTQUF0QixFQUFpQztBQUM3QixXQUFPLFNBQVMsRUFBaEI7QUFDSDs7QUFFRCxNQUFJLE1BQUo7QUFDQSxFQUFBLE1BQU0sQ0FBQyxPQUFQLENBQWUsVUFBQSxRQUFRLEVBQUk7QUFDdkIsUUFBSSxLQUFLLENBQUMsT0FBTixDQUFjLFFBQWQsQ0FBdUIsUUFBdkIsQ0FBSixFQUFzQztBQUNsQyxVQUFNLElBQUksR0FBRyxRQUFRLENBQUMsU0FBVCxDQUFtQixDQUFuQixDQUFiO0FBQ0EsVUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFKLENBQVcsUUFBWCxFQUFxQixHQUFyQixDQUFkO0FBRUEsTUFBQSxNQUFNLEdBQUcsS0FBSyxDQUFDLE9BQU4sQ0FBYyxPQUFkLENBQXNCLEtBQXRCLEVBQTZCLFNBQVMsbUJBQVksSUFBWixFQUF0QyxDQUFUO0FBQ0g7QUFDSixHQVBEO0FBU0EsTUFBTSxPQUFPLGFBQU0sS0FBSyxDQUFDLElBQVosZUFBcUIsTUFBckIsQ0FBYjtBQUNBLFNBQU8sYUFBYSxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLE1BQWpCLENBQXBCO0FBQ0g7O0FBRUQsU0FBUyxTQUFULEdBQXFCO0FBQ2pCLFNBQU8sTUFBTSxDQUFDLEdBQVAsQ0FBVyxVQUFBLEtBQUssRUFBSTtBQUN2QixXQUFPLGFBQWEsQ0FBQyxLQUFELEVBQVEsU0FBUixDQUFwQjtBQUNILEdBRk0sQ0FBUDtBQUdILEMsQ0FFRDs7O0FBQ0EsU0FBUyxTQUFULENBQW1CLEtBQW5CLEVBQTBCO0FBQ3RCLDhCQUFvQixLQUFwQjtBQUNIOztBQUVELFNBQVMsYUFBVCxDQUF1QixJQUF2QixFQUE2QixPQUE3QixFQUFzQyxLQUF0QyxFQUE2QztBQUN6QyxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLEVBQUEsY0FBYyxDQUFDLFNBQWYsR0FBMkIsT0FBM0I7QUFDQSxFQUFBLGNBQWMsQ0FBQyxTQUFmLEdBQTJCLEtBQTNCOztBQUVBLE1BQUksSUFBSSxDQUFDLElBQUwsY0FBZ0IsUUFBUSxDQUFDLEtBQXpCLGNBQWtDLElBQUksQ0FBQyxJQUFMLENBQVUsS0FBVixDQUFnQixHQUFoQixFQUFxQixDQUFyQixDQUFsQyxDQUFKLEVBQWlFO0FBQzdELElBQUEsY0FBYyxDQUFDLFNBQWYsR0FBMkIsY0FBYyxDQUFDLFNBQWYsR0FBMkIsTUFBdEQ7QUFDSDs7QUFFRCxTQUFPLGNBQVA7QUFDSCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCAqIGFzIG1lc3NhZ2UgZnJvbSAnLi9tb2R1bGVzL2NoYXR0aW5nJ1xuXG5jb25zdCBzb2NrZXQgPSBpbygpXG5cbmNvbnN0XG4gICAgY2hhdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbc2VuZC1tZXNzYWdlXScpLFxuICAgIGNoYXROYW1lID0gY2hhdEZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRleHRcIl06Zmlyc3Qtb2YtdHlwZScpLFxuICAgIGNoYXRTdHJpbmcgPSBjaGF0Rm9ybS5xdWVyeVNlbGVjdG9yKCdkaXYgaW5wdXRbdHlwZT1cInRleHRcIl0nKSxcbiAgICBjaGF0U3VibWl0ID0gY2hhdEZvcm0ucXVlcnlTZWxlY3RvcignZGl2IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nKVxuXG4vLyBDaGF0dGluZ1xuY2hhdFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIHNvY2tldC5lbWl0KCdjaGF0Jywge1xuICAgICAgICBuYW1lOiBjaGF0TmFtZS52YWx1ZSxcbiAgICAgICAgbWVzc2FnZTogY2hhdFN0cmluZy52YWx1ZVxuICAgIH0pXG5cbiAgICBzb2NrZXQuZW1pdCgnY29tbWFuZCcsIHtcbiAgICAgICAgbmFtZTogY2hhdE5hbWUudmFsdWUsXG4gICAgICAgIG1lc3NhZ2U6IGNoYXRTdHJpbmcudmFsdWVcbiAgICB9KVxuXG4gICAgc29ja2V0LmVtaXQoJ2Vtb3RlJywge1xuICAgICAgICBuYW1lOiBjaGF0TmFtZS52YWx1ZSxcbiAgICAgICAgbWVzc2FnZTogY2hhdFN0cmluZy52YWx1ZVxuICAgIH0pXG5cbiAgICBjaGF0U3RyaW5nLnZhbHVlID0gJydcbn0pXG5cbnNvY2tldC5vbignY2hhdCcsICh1c2VyKSA9PiB7XG4gICAgbWVzc2FnZS5jaGF0KHVzZXIpXG59KVxuXG5zb2NrZXQub24oJ2NvbW1hbmQnLCAoY29tbWFuZCkgPT4ge1xuICAgIG1lc3NhZ2UuY29tbWFuZChjb21tYW5kKVxufSlcblxuc29ja2V0Lm9uKCdlbW90ZScsIChlbW90ZSkgPT4ge1xuICAgIG1lc3NhZ2UuZW1vdGUoZW1vdGUpXG59KVxuXG4vLyBKb2luaW5nIHRoZSBjaGF0XG5zb2NrZXQub24oJ2pvaW4nLCAoZGF0YSkgPT4ge1xuICAgIG1lc3NhZ2Uuc2VydmVyKGRhdGEpXG59KVxuXG4vLyBMZWF2aW5nIHRoZSBjaGF0XG5zb2NrZXQub24oJ2xlYXZlJywgKGRhdGEpID0+IHtcbiAgICBtZXNzYWdlLnNlcnZlcihkYXRhKVxufSkiLCJpbXBvcnQgKiBhcyBjb21tYW5kcyBmcm9tICcuL2NvbW1hbmRzJ1xuaW1wb3J0ICogYXMgZW1vdGVzIGZyb20gJy4vZW1vdGVzJ1xuXG5jb25zdFxuICAgIGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbY2hhdF0nKSxcbiAgICBjaGF0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tzZW5kLW1lc3NhZ2VdJyksXG4gICAgY2hhdE5hbWUgPSBjaGF0Rm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwidGV4dFwiXTpmaXJzdC1vZi10eXBlJylcblxuZXhwb3J0IGZ1bmN0aW9uIGNoYXQodXNlcikge1xuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3VzZXIubmFtZX06ICR7dXNlci5tZXNzYWdlfWBcbiAgICBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgPSAndXNlcidcblxuICAgIGlmICh1c2VyLm5hbWUgPT0gYCR7Y2hhdE5hbWUudmFsdWV9ICR7dXNlci5uYW1lLnNwbGl0KCcgJylbMV19YCkge1xuICAgICAgICBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgPSBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgKyAnIHlvdSdcbiAgICB9XG5cbiAgICBhZGRNZXNzYWdlKG1lc3NhZ2VFbGVtZW50KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VydmVyKGRhdGEpIHtcbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm1lc3NhZ2VcbiAgICBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgPSAnc2VydmVyJ1xuICAgIGFkZE1lc3NhZ2UobWVzc2FnZUVsZW1lbnQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21tYW5kKGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZHMuY2hlY2soY29tbWFuZC5tZXNzYWdlKSkge1xuICAgICAgICBhZGRNZXNzYWdlKGNvbW1hbmRzLnJ1bihjb21tYW5kLm1lc3NhZ2UpKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZhbGxiYWNrSW5wdXQoJ2NvbW1hbmQnKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVtb3RlKGVtb3RlKSB7XG4gICAgaWYgKGVtb3Rlcy5jaGVjayhlbW90ZS5tZXNzYWdlKSkge1xuICAgICAgICBhZGRNZXNzYWdlKGVtb3Rlcy5ydW4oZW1vdGUpKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZhbGxiYWNrSW5wdXQoJ2Vtb3RlJylcbiAgICB9XG59XG5cbi8vIEZ1bmN0aW9ucyBJIHJlLXVzZVxuZnVuY3Rpb24gZmFsbGJhY2tJbnB1dChpbnB1dCkge1xuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGBUaGlzICR7aW5wdXR9IGlzIG5vdCBhdmFpbGFibGUhYFxuICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTmFtZSA9IGlucHV0XG4gICAgYWRkTWVzc2FnZShtZXNzYWdlRWxlbWVudClcbn1cblxuZnVuY3Rpb24gYWRkTWVzc2FnZShtZXNzYWdlRWxlbWVudCkge1xuICAgIGlmIChtZXNzYWdlRWxlbWVudC5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZChtZXNzYWdlRWxlbWVudClcbiAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlRWxlbWVudC5mb3JFYWNoKGVsZW1lbnQgPT4gY2hhdENvbnRhaW5lci5hcHBlbmQoZWxlbWVudCkpXG4gICAgfVxuICAgIHNjcm9sbFRvQm90dG9tKClcbn1cblxuZnVuY3Rpb24gc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgY2hhdENvbnRhaW5lci5zY3JvbGxUb3AgPSBjaGF0Q29udGFpbmVyLnNjcm9sbEhlaWdodCAtIGNoYXRDb250YWluZXIuY2xpZW50SGVpZ2h0O1xufSIsImNvbnN0IGNvbW1hbmRzID0gWycvY29tbWFuZHMnLCAnL3JlZCcsICcveWVsbG93JywgJy9ncmVlbicsICcvYmx1ZSddXG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVjayhjb21tYW5kKSB7XG4gICAgcmV0dXJuIGNvbW1hbmRzLmZpbmQobWVzc2FnZSA9PiBtZXNzYWdlID09PSBjb21tYW5kKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuKGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCA9PT0gJy9jb21tYW5kcycpIHtcbiAgICAgICAgcmV0dXJuIGFsbENvbW1hbmRzKClcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZCA9PT0gJy9yZWQnKSB7XG4gICAgICAgIHJldHVybiBjb2xvcignI0UwMUU1QScsICdSZWQnKVxuICAgIH1cblxuICAgIGlmIChjb21tYW5kID09PSAnL3llbGxvdycpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yKCcjRUJCMjJFJywgJ1llbGxvdycpXG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmQgPT09ICcvZ3JlZW4nKSB7XG4gICAgICAgIHJldHVybiBjb2xvcignIzJGQjY3RCcsICdHcmVlbicpXG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmQgPT09ICcvYmx1ZScpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yKCcjMzdDNUYwJywgJ0JsdWUnKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYWxsQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIGNvbW1hbmRzLm1hcChjb21tYW5kID0+IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU1lc3NhZ2UoY29tbWFuZClcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjb2xvcihjb2xvciwgbmFtZSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tjaGF0cGFnZV0nKS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3J9YClcbiAgICByZXR1cm4gY3JlYXRlTWVzc2FnZShgQ2hhbmdlZCBjb2xvciB0bzogJHtuYW1lfWApXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2VcbiAgICBtZXNzYWdlRWxlbWVudC5jbGFzc05hbWUgPSAnY29tbWFuZCdcblxuICAgIHJldHVybiBtZXNzYWdlRWxlbWVudFxufSIsImNvbnN0IGVtb3RlcyA9IFsnOmVtb3RlcycsICc6aGFwcHknLCAnOmFuZ3J5JywgJzpzYWQnLCAnOmNyeScsICc6bGF1Z2gnLCAnOmtpc3MnXVxuXG5jb25zdFxuICAgIGNoYXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3NlbmQtbWVzc2FnZV0nKSxcbiAgICBjaGF0TmFtZSA9IGNoYXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdOmZpcnN0LW9mLXR5cGUnKVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2soZW1vdGUpIHtcbiAgICByZXR1cm4gZW1vdGVzLnNvbWUoc3RyaW5nID0+IGVtb3RlLmluY2x1ZGVzKHN0cmluZykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBydW4oZW1vdGUpIHtcbiAgICBpZiAoZW1vdGUubWVzc2FnZSA9PT0gJzplbW90ZXMnKSB7XG4gICAgICAgIHJldHVybiBhbGxFbW90ZXMoKVxuICAgIH1cblxuICAgIGxldCBzdHJpbmdcbiAgICBlbW90ZXMuZm9yRWFjaChlbW90aWNvbiA9PiB7XG4gICAgICAgIGlmIChlbW90ZS5tZXNzYWdlLmluY2x1ZGVzKGVtb3RpY29uKSkge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGVtb3RpY29uLnN1YnN0cmluZygxKVxuICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGVtb3RpY29uLCAnZycpXG5cbiAgICAgICAgICAgIHN0cmluZyA9IGVtb3RlLm1lc3NhZ2UucmVwbGFjZShyZWdleCwgY3JlYXRlSW1nKGAvaW1hZ2VzLyR7bmFtZX1gKSlcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBtZXNzYWdlID0gYCR7ZW1vdGUubmFtZX06ICR7c3RyaW5nfWBcbiAgICByZXR1cm4gY3JlYXRlTWVzc2FnZShlbW90ZSwgbWVzc2FnZSwgJ3VzZXInKVxufVxuXG5mdW5jdGlvbiBhbGxFbW90ZXMoKSB7XG4gICAgcmV0dXJuIGVtb3Rlcy5tYXAoZW1vdGUgPT4ge1xuICAgICAgICByZXR1cm4gY3JlYXRlTWVzc2FnZShlbW90ZSwgJ2NvbW1hbmQnKVxuICAgIH0pXG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnNcbmZ1bmN0aW9uIGNyZWF0ZUltZyhlbW90ZSkge1xuICAgIHJldHVybiBgPGltZyBzcmM9XCIke2Vtb3RlfS5wbmdcIj5gXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UodXNlciwgbWVzc2FnZSwgYWN0b3IpIHtcbiAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbWVzc2FnZUVsZW1lbnQuaW5uZXJIVE1MID0gbWVzc2FnZVxuICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTmFtZSA9IGFjdG9yXG5cbiAgICBpZiAodXNlci5uYW1lID09IGAke2NoYXROYW1lLnZhbHVlfSAke3VzZXIubmFtZS5zcGxpdCgnICcpWzFdfWApIHtcbiAgICAgICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NOYW1lID0gbWVzc2FnZUVsZW1lbnQuY2xhc3NOYW1lICsgJyB5b3UnXG4gICAgfVxuXG4gICAgcmV0dXJuIG1lc3NhZ2VFbGVtZW50XG59Il19"}